---
// Copyright (C) 2026 mucookul
// SPDX-License-Identifier: AGPL-3.0-only

import Footer from "@/components/Footer.astro";
import Nav from "@/components/Nav.astro";

import faviconLight from "@/assets/FaviconLight.svg";
import faviconDark from "@/assets/FaviconDark.svg";

import "@/styles/global.css";

interface Frontmatter {
    title: string;
}

interface Props {
    frontmatter: Frontmatter;
}
const { frontmatter } = Astro.props;
---

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link
            rel="icon"
            href={faviconLight.src}
            media="(prefers-color-scheme:light)"
        />
        <link
            rel="icon"
            href={faviconDark.src}
            media="(prefers-color-scheme:dark)"
        />
        <meta name="viewport" content="width=device-width" />
        <meta name="generator" content={Astro.generator} />
        <meta
            name="description"
            content="mucookul's little blog and website."
        />
        <title>{frontmatter.title} | mucookul</title>
        <link
            rel="preload"
            href="/fonts/LexendDeca.woff2"
            as="font"
            type="font/woff2"
            crossorigin
        />
        <link
            rel="preload"
            href="/fonts/CommitMono.woff2"
            as="font"
            type="font/woff2"
            crossorigin
        />
    </head>
    <body
        class="grid h-screen grid-rows-[auto_1fr_auto] place-self-center dark:bg-black dark:text-white">
        <a
            href="#mainContent"
            class="absolute top-0 left-0 opacity-0 focus:opacity-100"
            >Skip to main content</a
        >
        <Nav />
        <main
            id="mainContent"
            class="prose dark:prose-invert w-screen max-w-prose p-4">
            <slot />
        </main>
        <Footer />
    </body>
</html>

<style>
    :root #mainContent {
        --tw-prose-links: var(--color-red-500);
    }
    :root.dark #mainContent {
        --tw-prose-links: var(--color-red-400);
    }
    :root ::selection {
        background: var(--color-red-200);
    }
    :root.dark ::selection {
        background: var(--color-red-950);
    }
</style>

<script is:inline>
    if (localStorage.getItem("dark") == null) {
        localStorage.setItem(
            "dark",
            window.matchMedia("(prefers-color-scheme: dark)").matches
                ? "true"
                : "false",
        );
    }

    if (localStorage.getItem("dark") == "true") {
        document.documentElement.classList.add("dark");
    }
</script>
